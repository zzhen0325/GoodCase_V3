# 边栏样式统一管理文档

## 概述

为了更好地管理和维护边栏样式，我们将所有边栏相关的样式统一集中到 `/styles/sidebar-theme.css` 文件中。这样可以：

- 🎨 **统一样式管理**：所有边栏样式在一个地方定义和修改
- 🔧 **易于维护**：修改样式时只需要在一个文件中操作
- 🎯 **主题一致性**：确保整个应用的边栏风格统一
- 🚀 **快速定制**：通过修改 CSS 变量快速调整整体外观

## 文件结构

```
├── styles/
│   └── sidebar-theme.css          # 边栏样式统一配置文件
├── app/
│   └── globals.css                # 引入边栏主题样式
├── components/
│   ├── app-sidebar.tsx            # 主边栏组件（使用统一样式类）
│   ├── ui/sidebar.tsx              # 基础边栏组件（shadcn/ui）
│   └── sidebar/
│       └── tag-groups.tsx          # 标签分组组件（使用统一样式类）
```

## 样式类名映射

### 基础组件样式

| 原始类名 | 统一类名 | 说明 |
|---------|---------|------|
| `h-16 flex items-center` | `sidebar-header` | 边栏头部 |
| `flex min-h-0 flex-1 flex-col gap-2 overflow-auto custom-scrollbar` | `sidebar-content` | 边栏内容区域 |
| `flex flex-col gap-2` | `sidebar-footer` | 边栏底部 |
| `relative flex w-full min-w-0 flex-col p-2` | `sidebar-group` | 边栏分组 |

### 功能组件样式

| 原始类名 | 统一类名 | 说明 |
|---------|---------|------|
| `bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-xl` | `brand-icon` | 品牌图标 |
| `h-8 w-8 p-0` | `dropdown-trigger` | 下拉菜单触发器 |
| `px-4 mt-6` | `search-area` | 搜索区域 |
| `mt-6` | `tag-groups-area` | 标签分组区域 |
| `w-full` | `tool-button` | 工具按钮 |
| `w-full bg-black hover:bg-gray-800 text-white font-medium py-3 mb-6 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors` | `upload-button` | 上传按钮 |

### 标签相关样式

| 原始类名 | 统一类名 | 说明 |
|---------|---------|------|
| `inline-flex items-center rounded-md px-2 py-1 text-xs font-medium transition-colors cursor-pointer` | `tag-item` | 标签基础样式 |
| `bg-sidebar-accent text-sidebar-accent-foreground font-medium` | `tag-item-selected` | 选中的标签 |
| `hover:bg-sidebar-accent text-sidebar-foreground` | `tag-item-unselected` | 未选中的标签 |

## 使用方法

### 1. 在组件中使用统一样式类

```tsx
// ❌ 旧的写法
<SidebarHeader className="h-16 flex items-center">

// ✅ 新的写法
<SidebarHeader className="sidebar-header">
```

```tsx
// ❌ 旧的写法
<div className="bg-sidebar-primary text-sidebar-primary-foreground flex aspect-square size-8 items-center justify-center rounded-xl">

// ✅ 新的写法
<div className="brand-icon">
```

### 2. 自定义主题

在 `sidebar-theme.css` 文件中修改 CSS 变量来快速调整整体外观：

```css
/* 自定义主题变量 */
.sidebar-theme-custom {
  --sidebar-background: hsl(220, 13%, 18%);
  --sidebar-foreground: hsl(220, 9%, 46%);
  --sidebar-primary: hsl(220, 14%, 96%);
  --sidebar-primary-foreground: hsl(220, 13%, 18%);
  --sidebar-accent: hsl(220, 14%, 96%);
  --sidebar-accent-foreground: hsl(220, 13%, 18%);
  --sidebar-border: hsl(220, 13%, 28%);
  --sidebar-ring: hsl(220, 14%, 96%);
}
```

然后在根元素上应用自定义主题：

```tsx
<div className="sidebar-theme-custom">
  <AppSidebar />
</div>
```

### 3. 调整尺寸和间距

```css
:root {
  /* 边栏尺寸变量 */
  --sidebar-width: 16rem;              /* 桌面端宽度 */
  --sidebar-width-mobile: 18rem;       /* 移动端宽度 */
  --sidebar-width-icon: 3rem;          /* 图标模式宽度 */
  --sidebar-height: 100vh;             /* 高度 */
  
  /* 边栏间距变量 */
  --sidebar-padding: 0.5rem;           /* 内边距 */
  --sidebar-gap: 0.5rem;               /* 间距 */
  
  /* 边栏动画变量 */
  --sidebar-transition-duration: 200ms; /* 动画时长 */
  --sidebar-transition-easing: ease-linear; /* 动画缓动 */
}
```

## 样式定制指南

### 1. 修改颜色主题

所有颜色相关的样式都通过 CSS 变量定义，可以在 `globals.css` 中的 `:root` 和 `.dark` 选择器中修改：

```css
:root {
  --sidebar-background: 0 0% 98%;      /* 边栏背景色 */
  --sidebar-foreground: oklch(0.3211 0 0); /* 边栏前景色 */
  --sidebar-primary: oklch(0.9761 0.1299 109.5179); /* 主色调 */
  --sidebar-accent: oklch(0.9490 0.0394 332.3185);  /* 强调色 */
  --sidebar-border: oklch(0.8699 0 0);  /* 边框色 */
}
```

### 2. 添加新的样式类

在 `sidebar-theme.css` 中的 `@layer components` 内添加新的样式类：

```css
@layer components {
  /* 新的自定义样式 */
  .sidebar-custom-element {
    @apply bg-sidebar-accent text-sidebar-accent-foreground rounded-lg p-2;
  }
}
```

### 3. 响应式设计

```css
@layer components {
  /* 响应式样式 */
  @media (max-width: 768px) {
    .sidebar-mobile {
      @apply w-[--sidebar-width-mobile];
    }
  }
}
```

## 最佳实践

### 1. 命名规范

- 使用 `sidebar-` 前缀表示边栏相关样式
- 使用语义化的名称，如 `sidebar-header`、`sidebar-content`
- 状态相关的样式使用后缀，如 `tag-item-selected`、`tag-item-unselected`

### 2. 样式组织

- 基础样式在前，功能样式在后
- 相关的样式放在一起
- 使用注释分组和说明

### 3. 维护建议

- 新增边栏相关样式时，优先在 `sidebar-theme.css` 中定义
- 避免在组件中直接写复杂的 Tailwind 类名
- 定期检查和清理未使用的样式类

## 迁移指南

如果需要将现有的边栏样式迁移到统一管理系统：

1. **识别样式**：找出所有边栏相关的样式类名
2. **创建映射**：在 `sidebar-theme.css` 中创建对应的统一样式类
3. **替换引用**：在组件中将原始类名替换为统一类名
4. **测试验证**：确保样式效果保持一致
5. **清理代码**：移除不再使用的样式定义

## 故障排除

### 样式不生效

1. 检查 `globals.css` 中是否正确引入了 `sidebar-theme.css`
2. 确认样式类名拼写正确
3. 检查 CSS 层级是否正确（应该在 `@layer components` 中）

### 主题切换问题

1. 确认暗色主题的 CSS 变量定义正确
2. 检查主题切换逻辑是否正确应用了对应的类名

### 响应式问题

1. 检查媒体查询断点是否正确
2. 确认移动端样式是否正确定义

## 总结

通过统一的边栏样式管理系统，我们实现了：

- ✅ **集中管理**：所有边栏样式在一个文件中
- ✅ **易于维护**：修改样式更加简单直观
- ✅ **主题一致**：确保整个应用风格统一
- ✅ **快速定制**：通过变量快速调整外观
- ✅ **代码简洁**：组件中的类名更加简洁易读

这个系统为边栏的样式管理提供了一个可扩展、易维护的解决方案。