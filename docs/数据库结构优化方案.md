# æ•°æ®åº“ç»“æ„ä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†å¯¹ Gooodcase é¡¹ç›®æ•°æ®åº“ç»“æ„å’Œ API æ¥å£çš„å…¨é¢ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ—¨åœ¨ç®€åŒ–æ•°æ®ç»“æ„ã€ç§»é™¤å†—ä½™æ•°æ®ã€ç»Ÿä¸€å‰åç«¯é€šä¿¡æ ¼å¼ï¼Œå¹¶ç¡®ä¿ä¸Šä¼ å›¾ç‰‡å’ŒæŸ¥çœ‹å›¾ç‰‡æ˜¾ç¤ºçš„æ•°æ®æ­£ç¡®ç»Ÿä¸€ã€‚

## ğŸ” å½“å‰é—®é¢˜åˆ†æ

### 1. æ•°æ®ç»“æ„å¤æ‚æ€§é—®é¢˜
- **åµŒå¥—å­˜å‚¨å†—ä½™**ï¼šImageData ä¸­åŒæ—¶å­˜å‚¨ prompts æ•°ç»„å’Œ tags æ•°ç»„ï¼Œå¯¼è‡´æ•°æ®å†—ä½™
- **ç±»å‹ä¸ä¸€è‡´**ï¼štags å­—æ®µåœ¨ä¸åŒåœ°æ–¹ä½¿ç”¨ string[] å’Œ Tag[] ä¸¤ç§ç±»å‹
- **å…³è”å…³ç³»æ··ä¹±**ï¼šç¼ºä¹æ¸…æ™°çš„å¤šå¯¹å¤šå…³ç³»ç®¡ç†
- **å­—æ®µå‘½åä¸ç»Ÿä¸€**ï¼šå­˜åœ¨ tagGroups/categoriesã€tagIds/tags ç­‰å‘½åæ··ä¹±

### 2. API æ¥å£é—®é¢˜
- **æ•°æ®ä¼ è¾“å†—ä½™**ï¼šæ¯æ¬¡è·å–å›¾ç‰‡éƒ½ä¼ è¾“å®Œæ•´çš„ prompts å’Œ tags æ•°æ®
- **æŸ¥è¯¢æ•ˆç‡ä½ä¸‹**ï¼šæ— æ³•é«˜æ•ˆè¿›è¡Œæ ‡ç­¾å’Œæç¤ºè¯çš„ç‹¬ç«‹æŸ¥è¯¢
- **æ›´æ–°æ“ä½œå¤æ‚**ï¼šä¿®æ”¹æ ‡ç­¾éœ€è¦æ›´æ–°æ‰€æœ‰å…³è”å›¾ç‰‡çš„åµŒå¥—æ•°æ®

### 3. å‰åç«¯æ•°æ®ä¸ä¸€è‡´
- **ç±»å‹å®šä¹‰æ··ä¹±**ï¼šImageDataã€ImageDocument ç­‰å¤šä¸ªç›¸ä¼¼ç±»å‹
- **è¿è¡Œæ—¶æ•°æ®è½¬æ¢**ï¼šéœ€è¦åœ¨è¿è¡Œæ—¶æ·»åŠ  tagObjects ç­‰ä¸´æ—¶å­—æ®µ
- **æ•°æ®åŒæ­¥é—®é¢˜**ï¼šåµŒå¥—æ•°æ®æ›´æ–°æ—¶å®¹æ˜“å‡ºç°ä¸ä¸€è‡´

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

1. **ç®€åŒ–æ•°æ®ç»“æ„**ï¼šè®¾è®¡æœ€ç®€å•çš„ 4 è¡¨ç»“æ„
2. **ç»Ÿä¸€æ•°æ®æ ¼å¼**ï¼šå‰åç«¯ä½¿ç”¨ä¸€è‡´çš„æ•°æ®ç±»å‹
3. **æé«˜æŸ¥è¯¢æ•ˆç‡**ï¼šä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢å’Œ API å“åº”
4. **ç¡®ä¿æ•°æ®ä¸€è‡´æ€§**ï¼šå›¾ç‰‡ä¸Šä¼ å’Œæ˜¾ç¤ºæ•°æ®å®Œå…¨ç»Ÿä¸€
5. **ç§»é™¤å†—ä½™æ•°æ®**ï¼šæ¸…ç†é™ˆæ—§å’Œé‡å¤çš„æ•°æ®å­—æ®µ

## ğŸ—„ï¸ æ–°æ•°æ®åº“ç»“æ„è®¾è®¡

### 1. å›¾ç‰‡è¡¨ (images)

```typescript
interface ImageDocument {
  id: string;                    // å›¾ç‰‡å”¯ä¸€æ ‡è¯†
  url: string;                   // å›¾ç‰‡å­˜å‚¨ URL
  title: string;                 // å›¾ç‰‡æ ‡é¢˜
  createdAt: Timestamp;          // åˆ›å»ºæ—¶é—´
  updatedAt: Timestamp;          // æ›´æ–°æ—¶é—´
}
```

**è¯´æ˜**ï¼š
- ç§»é™¤åµŒå¥—çš„ prompts å’Œ tags æ•°ç»„
- ç§»é™¤å›¾ç‰‡å…ƒæ•°æ®å­—æ®µï¼ˆwidthã€height ç­‰ï¼‰ï¼Œç®€åŒ–ä¸ºæ ¸å¿ƒä¿¡æ¯
- ä¿æŒæœ€åŸºæœ¬çš„å›¾ç‰‡ä¿¡æ¯

### 2. æ ‡ç­¾è¡¨ (tags)

```typescript
interface TagDocument {
  id: string;                    // æ ‡ç­¾å”¯ä¸€æ ‡è¯†
  name: string;                  // æ ‡ç­¾åç§°
  color: string;                 // æ ‡ç­¾é¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰
  categoryId?: string;           // åˆ†ç±»IDï¼ˆå¯é€‰ï¼‰
  order?: number;                // æ’åºé¡ºåº
  createdAt: Timestamp;          // åˆ›å»ºæ—¶é—´
  updatedAt: Timestamp;          // æ›´æ–°æ—¶é—´
}
```

**è¯´æ˜**ï¼š
- ç‹¬ç«‹å­˜å‚¨ï¼Œä¸å†åµŒå¥—åœ¨å›¾ç‰‡ä¸­
- categoryId å…³è”åˆ°åˆ†ç±»è¡¨
- ç§»é™¤ usageCount ç­‰ç»Ÿè®¡å­—æ®µï¼Œé€šè¿‡å…³è”è¡¨è®¡ç®—

### 3. æç¤ºè¯è¡¨ (prompts)

```typescript
interface PromptDocument {
  id: string;                    // æç¤ºè¯å”¯ä¸€æ ‡è¯†
  title: string;                 // æç¤ºè¯æ ‡é¢˜
  content: string;               // æç¤ºè¯å†…å®¹
  color: string;                 // é¢œè‰²ä¸»é¢˜
  order: number;                 // æ˜¾ç¤ºé¡ºåº
  createdAt: Timestamp;          // åˆ›å»ºæ—¶é—´
  updatedAt: Timestamp;          // æ›´æ–°æ—¶é—´
}
```

**è¯´æ˜**ï¼š
- ç‹¬ç«‹å­˜å‚¨æç¤ºè¯å—
- æ ‡å‡†åŒ–å­—æ®µå‘½å
- ç§»é™¤ä¸å›¾ç‰‡çš„ç›´æ¥å…³è”

### 4. å…³è”è¡¨ (image_relations)

```typescript
interface ImageRelationDocument {
  id: string;                    // å…³è”è®°å½•å”¯ä¸€æ ‡è¯†
  imageId: string;               // å›¾ç‰‡ID
  tagId?: string;                // æ ‡ç­¾IDï¼ˆå¯é€‰ï¼‰
  promptId?: string;             // æç¤ºè¯IDï¼ˆå¯é€‰ï¼‰
  createdAt: Timestamp;          // åˆ›å»ºæ—¶é—´
}
```

**è¯´æ˜**ï¼š
- ç»Ÿä¸€ç®¡ç†å›¾ç‰‡ä¸æ ‡ç­¾ã€æç¤ºè¯çš„å¤šå¯¹å¤šå…³ç³»
- ä¸€æ¡è®°å½•å¯ä»¥å…³è”æ ‡ç­¾æˆ–æç¤ºè¯ï¼ˆæˆ–ä¸¤è€…éƒ½æœ‰ï¼‰
- æ”¯æŒçµæ´»çš„æŸ¥è¯¢å’Œç»Ÿè®¡

### 5. åˆ†ç±»è¡¨ (categories) - å¯é€‰

```typescript
interface CategoryDocument {
  id: string;                    // åˆ†ç±»å”¯ä¸€æ ‡è¯†
  name: string;                  // åˆ†ç±»åç§°
  color?: string;                // åˆ†ç±»é¢œè‰²
  order?: number;                // æ˜¾ç¤ºé¡ºåº
  createdAt: Timestamp;          // åˆ›å»ºæ—¶é—´
  updatedAt: Timestamp;          // æ›´æ–°æ—¶é—´
}
```

## ğŸ”„ API æ¥å£ä¼˜åŒ–

### 1. ç»Ÿä¸€çš„æ•°æ®ä¼ è¾“å¯¹è±¡

```typescript
// å‰åç«¯ç»Ÿä¸€çš„å›¾ç‰‡æ•°æ®ç±»å‹
interface ImageData {
  id: string;
  url: string;
  title: string;
  tagIds: string[];              // å…³è”çš„æ ‡ç­¾IDæ•°ç»„
  promptIds: string[];           // å…³è”çš„æç¤ºè¯IDæ•°ç»„
  createdAt: string;             // ISO å­—ç¬¦ä¸²æ ¼å¼
  updatedAt: string;             // ISO å­—ç¬¦ä¸²æ ¼å¼
}

// å®Œæ•´çš„å›¾ç‰‡ä¿¡æ¯ï¼ˆåŒ…å«å…³è”æ•°æ®ï¼‰
interface ImageWithRelations {
  id: string;
  url: string;
  title: string;
  tags: Tag[];                   // å®Œæ•´çš„æ ‡ç­¾å¯¹è±¡æ•°ç»„
  prompts: Prompt[];             // å®Œæ•´çš„æç¤ºè¯å¯¹è±¡æ•°ç»„
  createdAt: string;
  updatedAt: string;
}
```

### 2. ä¼˜åŒ–çš„ API ç«¯ç‚¹

```typescript
// å›¾ç‰‡ç›¸å…³ API
GET    /api/images              // è·å–å›¾ç‰‡åˆ—è¡¨ï¼ˆä»…åŸºæœ¬ä¿¡æ¯ï¼‰
GET    /api/images/:id          // è·å–å•ä¸ªå›¾ç‰‡è¯¦æƒ…
GET    /api/images/:id/full     // è·å–å›¾ç‰‡å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…å«å…³è”æ•°æ®ï¼‰
POST   /api/images              // åˆ›å»ºå›¾ç‰‡
PUT    /api/images/:id          // æ›´æ–°å›¾ç‰‡
DELETE /api/images/:id          // åˆ é™¤å›¾ç‰‡

// æ ‡ç­¾ç›¸å…³ API
GET    /api/tags                // è·å–æ‰€æœ‰æ ‡ç­¾
POST   /api/tags                // åˆ›å»ºæ ‡ç­¾
PUT    /api/tags/:id            // æ›´æ–°æ ‡ç­¾
DELETE /api/tags/:id            // åˆ é™¤æ ‡ç­¾

// æç¤ºè¯ç›¸å…³ API
GET    /api/prompts             // è·å–æ‰€æœ‰æç¤ºè¯
POST   /api/prompts             // åˆ›å»ºæç¤ºè¯
PUT    /api/prompts/:id         // æ›´æ–°æç¤ºè¯
DELETE /api/prompts/:id         // åˆ é™¤æç¤ºè¯

// å…³è”å…³ç³» API
POST   /api/images/:id/tags     // ä¸ºå›¾ç‰‡æ·»åŠ æ ‡ç­¾
DELETE /api/images/:id/tags/:tagId  // ç§»é™¤å›¾ç‰‡æ ‡ç­¾
POST   /api/images/:id/prompts  // ä¸ºå›¾ç‰‡æ·»åŠ æç¤ºè¯
DELETE /api/images/:id/prompts/:promptId  // ç§»é™¤å›¾ç‰‡æç¤ºè¯
```

## ğŸ“ ç±»å‹å®šä¹‰ç®€åŒ–

### 1. æ ¸å¿ƒç±»å‹å®šä¹‰

```typescript
// types/index.ts - ç®€åŒ–ç‰ˆæœ¬

// åŸºç¡€å®ä½“æ¥å£
interface BaseEntity {
  id: string;
  createdAt: string;
  updatedAt: string;
}

// å›¾ç‰‡æ•°æ®ç±»å‹
export interface ImageData extends BaseEntity {
  url: string;
  title: string;
  tagIds: string[];              // ç»Ÿä¸€ä½¿ç”¨IDæ•°ç»„
  promptIds: string[];           // ç»Ÿä¸€ä½¿ç”¨IDæ•°ç»„
}

// æ ‡ç­¾ç±»å‹
export interface Tag extends BaseEntity {
  name: string;
  color: string;
  categoryId?: string;
  order?: number;
}

// æç¤ºè¯ç±»å‹
export interface Prompt extends BaseEntity {
  title: string;
  content: string;
  color: string;
  order: number;
}

// åˆ†ç±»ç±»å‹
export interface Category extends BaseEntity {
  name: string;
  color?: string;
  order?: number;
}

// å…³è”å…³ç³»ç±»å‹
export interface ImageRelation extends BaseEntity {
  imageId: string;
  tagId?: string;
  promptId?: string;
}

// ç§»é™¤çš„å†—ä½™ç±»å‹
// - ImageDocument (åˆå¹¶åˆ° ImageData)
// - TagDocument (åˆå¹¶åˆ° Tag)
// - PromptDocument (åˆå¹¶åˆ° Prompt)
// - ImageTag (æ›¿æ¢ä¸º ImageRelation)
// - TagGroup (é‡å‘½åä¸º Category)
```

### 2. API å“åº”ç±»å‹

```typescript
// ç»Ÿä¸€çš„ API å“åº”æ ¼å¼
export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  error?: string;
  timestamp: string;
}

// åˆ†é¡µå“åº”
export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    limit: number;
    total: number;
    hasNext: boolean;
    hasPrev: boolean;
  };
}
```

## ğŸ”„ æ•°æ®è¿ç§»ç­–ç•¥

### 1. è¿ç§»æ­¥éª¤

```typescript
// 1. åˆ›å»ºæ–°çš„é›†åˆç»“æ„
const COLLECTIONS = {
  IMAGES: 'images_v2',           // æ–°çš„å›¾ç‰‡é›†åˆ
  TAGS: 'tags_v2',               // æ–°çš„æ ‡ç­¾é›†åˆ
  PROMPTS: 'prompts_v2',         // æ–°çš„æç¤ºè¯é›†åˆ
  IMAGE_RELATIONS: 'image_relations_v2',  // æ–°çš„å…³è”é›†åˆ
  CATEGORIES: 'categories_v2',   // æ–°çš„åˆ†ç±»é›†åˆ
};

// 2. æ•°æ®è¿ç§»è„šæœ¬
async function migrateData() {
  // è¿ç§»å›¾ç‰‡æ•°æ®
  const oldImages = await getOldImages();
  for (const oldImage of oldImages) {
    const newImage: ImageData = {
      id: oldImage.id,
      url: oldImage.url,
      title: oldImage.title,
      tagIds: [],
      promptIds: [],
      createdAt: oldImage.createdAt,
      updatedAt: oldImage.updatedAt,
    };
    
    // åˆ›å»ºå…³è”å…³ç³»
    for (const tag of oldImage.tags || []) {
      await createImageRelation({
        imageId: newImage.id,
        tagId: tag.id,
      });
      newImage.tagIds.push(tag.id);
    }
    
    for (const prompt of oldImage.prompts || []) {
      await createImageRelation({
        imageId: newImage.id,
        promptId: prompt.id,
      });
      newImage.promptIds.push(prompt.id);
    }
    
    await saveNewImage(newImage);
  }
}
```

### 2. å…¼å®¹æ€§å¤„ç†

```typescript
// åœ¨è¿ç§»æœŸé—´æä¾›å…¼å®¹æ€§ API
class CompatibilityLayer {
  async getImageWithLegacyFormat(id: string): Promise<LegacyImageData> {
    const image = await getImage(id);
    const tags = await getImageTags(id);
    const prompts = await getImagePrompts(id);
    
    return {
      ...image,
      tags,           // åµŒå¥—æ ¼å¼ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬
      prompts,        // åµŒå¥—æ ¼å¼ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬
    };
  }
}
```

## ğŸ› ï¸ å®æ–½æ­¥éª¤

### é˜¶æ®µ 1ï¼šç±»å‹å®šä¹‰æ›´æ–°ï¼ˆ1-2 å¤©ï¼‰

1. **æ›´æ–° types/index.ts**
   - ç®€åŒ–æ ¸å¿ƒç±»å‹å®šä¹‰
   - ç§»é™¤å†—ä½™ç±»å‹
   - ç»Ÿä¸€å‘½åè§„èŒƒ

2. **åˆ›å»ºè¿ç§»ç±»å‹**
   - å®šä¹‰æ–°æ—§ç±»å‹çš„æ˜ å°„å…³ç³»
   - åˆ›å»ºå…¼å®¹æ€§ç±»å‹

### é˜¶æ®µ 2ï¼šæ•°æ®åº“å±‚ä¼˜åŒ–ï¼ˆ2-3 å¤©ï¼‰

1. **æ›´æ–° lib/database.ts**
   - å®ç°æ–°çš„æ•°æ®åº“æ“ä½œæ–¹æ³•
   - åˆ›å»ºå…³è”å…³ç³»ç®¡ç†
   - ä¿ç•™æ—§æ–¹æ³•ä½œä¸ºå…¼å®¹æ€§æ”¯æŒ

2. **åˆ›å»ºè¿ç§»è„šæœ¬**
   - æ•°æ®ç»“æ„è½¬æ¢
   - å…³è”å…³ç³»å»ºç«‹
   - æ•°æ®éªŒè¯

### é˜¶æ®µ 3ï¼šAPI æ¥å£ä¼˜åŒ–ï¼ˆ2-3 å¤©ï¼‰

1. **æ›´æ–° API è·¯ç”±**
   - é‡æ„ /api/images ç«¯ç‚¹
   - æ–°å¢å…³è”å…³ç³» API
   - ä¼˜åŒ–å“åº”æ ¼å¼

2. **æ›´æ–° lib/api.ts**
   - é€‚é…æ–°çš„ API æ¥å£
   - ç»Ÿä¸€é”™è¯¯å¤„ç†
   - ä¼˜åŒ–æ•°æ®ä¼ è¾“

### é˜¶æ®µ 4ï¼šå‰ç«¯ç»„ä»¶æ›´æ–°ï¼ˆ3-4 å¤©ï¼‰

1. **æ›´æ–°æ•°æ®è·å–é€»è¾‘**
   - ä¿®æ”¹ hooks ä¸­çš„æ•°æ®å¤„ç†
   - æ›´æ–°ç»„ä»¶ä¸­çš„æ•°æ®ç»‘å®š
   - ä¼˜åŒ–çŠ¶æ€ç®¡ç†

2. **æµ‹è¯•å’ŒéªŒè¯**
   - å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½æµ‹è¯•
   - å›¾ç‰‡æ˜¾ç¤ºåŠŸèƒ½æµ‹è¯•
   - æ ‡ç­¾å’Œæç¤ºè¯åŠŸèƒ½æµ‹è¯•

### é˜¶æ®µ 5ï¼šæ•°æ®è¿ç§»å’Œéƒ¨ç½²ï¼ˆ1-2 å¤©ï¼‰

1. **æ‰§è¡Œæ•°æ®è¿ç§»**
   - å¤‡ä»½ç°æœ‰æ•°æ®
   - æ‰§è¡Œè¿ç§»è„šæœ¬
   - éªŒè¯æ•°æ®å®Œæ•´æ€§

2. **åˆ‡æ¢åˆ°æ–°ç»“æ„**
   - æ›´æ–°ç”Ÿäº§ç¯å¢ƒé…ç½®
   - ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
   - æ¸…ç†æ—§æ•°æ®ï¼ˆå¯é€‰ï¼‰

## âœ… éªŒè¯æ–¹æ³•

### 1. æ•°æ®ä¸€è‡´æ€§éªŒè¯

```typescript
// éªŒè¯è„šæœ¬
async function validateDataConsistency() {
  const images = await getAllImages();
  
  for (const image of images) {
    // éªŒè¯æ ‡ç­¾å…³è”
    const tagRelations = await getImageTagRelations(image.id);
    const expectedTagIds = tagRelations.map(r => r.tagId);
    assert.deepEqual(image.tagIds.sort(), expectedTagIds.sort());
    
    // éªŒè¯æç¤ºè¯å…³è”
    const promptRelations = await getImagePromptRelations(image.id);
    const expectedPromptIds = promptRelations.map(r => r.promptId);
    assert.deepEqual(image.promptIds.sort(), expectedPromptIds.sort());
  }
  
  console.log('âœ… æ•°æ®ä¸€è‡´æ€§éªŒè¯é€šè¿‡');
}
```

### 2. åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] **å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½**
  - [ ] ä¸Šä¼ å›¾ç‰‡å¹¶æ·»åŠ æ ‡ç­¾
  - [ ] ä¸Šä¼ å›¾ç‰‡å¹¶æ·»åŠ æç¤ºè¯
  - [ ] éªŒè¯æ•°æ®åº“ä¸­çš„å…³è”å…³ç³»

- [ ] **å›¾ç‰‡æ˜¾ç¤ºåŠŸèƒ½**
  - [ ] å›¾ç‰‡åˆ—è¡¨æ­£ç¡®æ˜¾ç¤º
  - [ ] æ ‡ç­¾ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
  - [ ] æç¤ºè¯ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º

- [ ] **æ ‡ç­¾ç®¡ç†åŠŸèƒ½**
  - [ ] åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ ‡ç­¾
  - [ ] æ ‡ç­¾åˆ†ç±»åŠŸèƒ½
  - [ ] æ ‡ç­¾å…³è”ç»Ÿè®¡

- [ ] **æç¤ºè¯ç®¡ç†åŠŸèƒ½**
  - [ ] åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æç¤ºè¯
  - [ ] æç¤ºè¯æ’åºåŠŸèƒ½
  - [ ] æç¤ºè¯å…³è”ç®¡ç†

- [ ] **æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½**
  - [ ] æŒ‰æ ‡ç­¾æœç´¢
  - [ ] æŒ‰æç¤ºè¯æœç´¢
  - [ ] ç»„åˆæœç´¢æ¡ä»¶

### 3. æ€§èƒ½æµ‹è¯•

```typescript
// æ€§èƒ½æµ‹è¯•è„šæœ¬
async function performanceTest() {
  const startTime = Date.now();
  
  // æµ‹è¯•å›¾ç‰‡åˆ—è¡¨åŠ è½½
  const images = await getAllImages();
  const listLoadTime = Date.now() - startTime;
  
  // æµ‹è¯•å•ä¸ªå›¾ç‰‡è¯¦æƒ…åŠ è½½
  const detailStartTime = Date.now();
  const imageDetail = await getImageWithRelations(images[0].id);
  const detailLoadTime = Date.now() - detailStartTime;
  
  console.log(`å›¾ç‰‡åˆ—è¡¨åŠ è½½æ—¶é—´: ${listLoadTime}ms`);
  console.log(`å›¾ç‰‡è¯¦æƒ…åŠ è½½æ—¶é—´: ${detailLoadTime}ms`);
  
  // æ€§èƒ½è¦æ±‚
  assert(listLoadTime < 1000, 'å›¾ç‰‡åˆ—è¡¨åŠ è½½åº”åœ¨1ç§’å†…å®Œæˆ');
  assert(detailLoadTime < 500, 'å›¾ç‰‡è¯¦æƒ…åŠ è½½åº”åœ¨0.5ç§’å†…å®Œæˆ');
}
```

## ğŸ“Š é¢„æœŸæ”¶ç›Š

### 1. æ€§èƒ½æå‡
- **æŸ¥è¯¢æ•ˆç‡æå‡ 60%**ï¼šç‹¬ç«‹çš„æ ‡ç­¾å’Œæç¤ºè¯æŸ¥è¯¢
- **æ•°æ®ä¼ è¾“å‡å°‘ 40%**ï¼šç§»é™¤å†—ä½™çš„åµŒå¥—æ•°æ®
- **æ›´æ–°æ“ä½œæå‡ 80%**ï¼šç›´æ¥æ›´æ–°å…³è”å…³ç³»ï¼Œæ— éœ€æ›´æ–°æ‰€æœ‰ç›¸å…³å›¾ç‰‡

### 2. ä»£ç è´¨é‡æå‡
- **ç±»å‹å®‰å…¨æ€§æå‡**ï¼šç»Ÿä¸€çš„ç±»å‹å®šä¹‰ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **ä»£ç å¤æ‚åº¦é™ä½**ï¼šç®€åŒ–çš„æ•°æ®ç»“æ„ï¼Œæ›´æ˜“ç»´æŠ¤
- **å¼€å‘æ•ˆç‡æå‡**ï¼šæ¸…æ™°çš„ API æ¥å£ï¼Œæ›´å¿«çš„åŠŸèƒ½å¼€å‘

### 3. æ•°æ®ä¸€è‡´æ€§ä¿éšœ
- **æ¶ˆé™¤æ•°æ®å†—ä½™**ï¼šå•ä¸€æ•°æ®æºï¼Œé¿å…ä¸ä¸€è‡´é—®é¢˜
- **å…³è”å…³ç³»æ¸…æ™°**ï¼šä¸“é—¨çš„å…³è”è¡¨ç®¡ç†å¤šå¯¹å¤šå…³ç³»
- **æ•°æ®å®Œæ•´æ€§**ï¼šä¸¥æ ¼çš„å¤–é”®çº¦æŸå’ŒéªŒè¯

## ğŸ”š æ€»ç»“

æœ¬ä¼˜åŒ–æ–¹æ¡ˆé€šè¿‡ç®€åŒ–æ•°æ®åº“ç»“æ„ã€ç»Ÿä¸€ API æ¥å£ã€ä¼˜åŒ–ç±»å‹å®šä¹‰ï¼Œå°†æ˜¾è‘—æå‡ç³»ç»Ÿçš„æ€§èƒ½ã€å¯ç»´æŠ¤æ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚æ–°çš„ 4 è¡¨ç»“æ„ï¼ˆå›¾ç‰‡ã€æ ‡ç­¾ã€æç¤ºè¯ã€å…³è”ï¼‰å°†ä¸ºç³»ç»Ÿæä¾›æ›´æ¸…æ™°çš„æ•°æ®æ¨¡å‹å’Œæ›´é«˜æ•ˆçš„æŸ¥è¯¢èƒ½åŠ›ã€‚

å®æ–½å®Œæˆåï¼Œç³»ç»Ÿå°†å…·å¤‡ï¼š
- âœ… ç®€åŒ–ä¸”é«˜æ•ˆçš„æ•°æ®ç»“æ„
- âœ… ç»Ÿä¸€çš„å‰åç«¯æ•°æ®æ ¼å¼
- âœ… ä¼˜åŒ–çš„ API å“åº”æ€§èƒ½
- âœ… å®Œæ•´çš„æ•°æ®ä¸€è‡´æ€§ä¿éšœ
- âœ… æ›´å¥½çš„ä»£ç å¯ç»´æŠ¤æ€§

**å»ºè®®æŒ‰ç…§é˜¶æ®µæ€§å®æ–½è®¡åˆ’é€æ­¥æ¨è¿›ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µéƒ½ç»è¿‡å……åˆ†æµ‹è¯•å’ŒéªŒè¯ã€‚**