# Gooodcase é¡¹ç›®æ–‡æ¡£æ•´ç†

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [ç±»å‹å®šä¹‰æ–‡ä»¶](#ç±»å‹å®šä¹‰æ–‡ä»¶)
3. [æ•°æ®åº“è®¾è®¡æ–‡æ¡£](#æ•°æ®åº“è®¾è®¡æ–‡æ¡£)
4. [æ¶æ„/æ¨¡å—è®¾è®¡æ–‡æ¡£](#æ¶æ„æ¨¡å—è®¾è®¡æ–‡æ¡£)
5. [æ•°æ®æµç¨‹å›¾/æ—¶åºå›¾](#æ•°æ®æµç¨‹å›¾æ—¶åºå›¾)
6. [APIæ¥å£è®¾è®¡](#apiæ¥å£è®¾è®¡)
7. [æ ·å¼è®¾è®¡è§„èŒƒ](#æ ·å¼è®¾è®¡è§„èŒƒ)

---

## é¡¹ç›®æ¦‚è¿°

**Gooodcase** æ˜¯ä¸€ä¸ªåŸºäº Next.js å’Œ Firebase çš„ç°ä»£åŒ–å›¾ç‰‡ç®¡ç†åº”ç”¨ï¼Œæ”¯æŒå›¾ç‰‡ä¸Šä¼ ã€æ ‡ç­¾ç®¡ç†ã€æœç´¢å’Œæ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“¸ å›¾ç‰‡ç®¡ç†ï¼ˆä¸Šä¼ ã€é¢„è§ˆã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- ğŸ·ï¸ æ ‡ç­¾ç³»ç»Ÿï¼ˆçµæ´»çš„æ ‡ç­¾åˆ†ç±»å’Œç®¡ç†ï¼‰
- ğŸ” æ™ºèƒ½æœç´¢ï¼ˆåŸºäºæ ‡é¢˜ã€æ ‡ç­¾å’Œæç¤ºè¯ï¼‰
- ğŸ“± å“åº”å¼è®¾è®¡ï¼ˆé€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ï¼‰
- â˜ï¸ äº‘ç«¯å­˜å‚¨ï¼ˆåŸºäºFirebaseçš„å®æ—¶æ•°æ®åŒæ­¥ï¼‰
- ğŸ“¦ æ•°æ®å¯¼å…¥å¯¼å‡ºï¼ˆæ”¯æŒæ•°æ®å¤‡ä»½å’Œè¿ç§»ï¼‰

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Next.js 14, React 18, TypeScript
- **æ ·å¼**: Tailwind CSS, Framer Motion
- **UIç»„ä»¶**: Radix UI, DND Kit
- **åç«¯**: Firebase (Firestore, Storage)
- **çŠ¶æ€ç®¡ç†**: React Hooks + Context

---

## ç±»å‹å®šä¹‰æ–‡ä»¶

### ğŸ“ æ–‡ä»¶ä½ç½®
- **ä¸»è¦ç±»å‹å®šä¹‰**: `types/index.ts`
- **æ•°æ®åº“ç±»å‹**: `lib/database.ts`
- **ç®¡ç†å‘˜æ“ä½œç±»å‹**: `lib/database-admin.ts`

### ğŸ”§ æ ¸å¿ƒæ•°æ®ç±»å‹

#### 1. åŸºç¡€å®ä½“ç±»å‹

```typescript
// åŸºç¡€å®ä½“æ¥å£
interface BaseEntity {
  id: string;
  createdAt: string;
  updatedAt: string;
}

// å›¾ç‰‡æ•°æ®æ¥å£
interface ImageData extends BaseEntity {
  url: string;
  title: string;
  prompts: Prompt[];
  tags: Tag[];
  usageCount?: number;
  isLocal?: boolean;
  isUploading?: boolean;
}

// æ ‡ç­¾æ¥å£
interface Tag {
  id: string;
  name: string;
  color: string;
  groupId: string;
  order?: number;
  usageCount?: number;
  createdAt?: string;
  updatedAt?: string;
}

// æç¤ºè¯æ¥å£
interface Prompt {
  id: string;
  title: string;
  content: string;
  color: string;
  order: number;
  createdAt?: string;
  updatedAt?: string;
}
```

#### 2. æ•°æ®åº“æ–‡æ¡£ç±»å‹

```typescript
// Firestore å›¾ç‰‡æ–‡æ¡£
interface ImageDocument {
  url: string;
  title: string;
  prompts: Prompt[];
  tags: Tag[];
  width: number;
  height: number;
  fileSize: number;
  format: string;
  colorSpace: string;
  hasTransparency: boolean;
  createdAt: string;
  updatedAt: string;
}

// æ ‡ç­¾åˆ†ç»„æ–‡æ¡£
interface TagGroupDocument {
  name: string;
  color: string;
  description?: string;
  order: number;
  tagCount: number;
  createdAt: string;
  updatedAt: string;
}
```

#### 3. åº”ç”¨çŠ¶æ€ç±»å‹

```typescript
// åº”ç”¨çŠ¶æ€
interface AppState {
  images: ImageData[];
  tags: Tag[];
  prompts: Prompt[];
  isLoading: boolean;
  error: string | null;
  connectionStatus: ConnectionStatus;
}

// æœç´¢è¿‡æ»¤å™¨
interface SearchFilters {
  query: string;
  selectedTags: string[];
  sortBy: 'createdAt' | 'updatedAt' | 'title';
  sortOrder: 'asc' | 'desc';
}
```

#### 4. APIå“åº”ç±»å‹

```typescript
// é€šç”¨APIå“åº”
interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
  timestamp: Date;
}

// æ•°æ®åº“æ“ä½œç»“æœ
interface DBResult<T = any> {
  success: boolean;
  data?: T;
  error?: string;
  timestamp: Date;
}
```

### ğŸ¨ é¢œè‰²ä¸»é¢˜ç±»å‹

```typescript
// é¢œè‰²ä¸»é¢˜
interface ColorTheme {
  name: string;
  bg: string;
  text: string;
}

// é¢„å®šä¹‰é¢œè‰²ä¸»é¢˜
const COLOR_THEMES: ColorTheme[] = [
  { name: 'slate', bg: '#f1f5f9', text: '#1e293b' },
  { name: 'amber', bg: '#fef3c7', text: '#c2410c' },
  { name: 'lime', bg: '#ecfccb', text: '#84cc16' },
  { name: 'green', bg: '#dcfce7', text: '#22c55e' },
  // ... æ›´å¤šé¢œè‰²ä¸»é¢˜
];
```

---

## æ•°æ®åº“è®¾è®¡æ–‡æ¡£

### ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

**æ•°æ®åº“**: Firebase Firestore  
**å­˜å‚¨**: Firebase Storage

### ğŸ“Š é›†åˆç»“æ„

#### 1. Images é›†åˆ (`images`)

```
images/
â”œâ”€â”€ {imageId}/
â”‚   â”œâ”€â”€ url: string              # å›¾ç‰‡URL
â”‚   â”œâ”€â”€ title: string            # å›¾ç‰‡æ ‡é¢˜
â”‚   â”œâ”€â”€ prompts: Prompt[]        # å…³è”çš„æç¤ºè¯
â”‚   â”œâ”€â”€ tags: Tag[]              # å…³è”çš„æ ‡ç­¾
â”‚   â”œâ”€â”€ width: number            # å›¾ç‰‡å®½åº¦
â”‚   â”œâ”€â”€ height: number           # å›¾ç‰‡é«˜åº¦
â”‚   â”œâ”€â”€ fileSize: number         # æ–‡ä»¶å¤§å°
â”‚   â”œâ”€â”€ format: string           # æ–‡ä»¶æ ¼å¼
â”‚   â”œâ”€â”€ colorSpace: string       # é¢œè‰²ç©ºé—´
â”‚   â”œâ”€â”€ hasTransparency: boolean # æ˜¯å¦æœ‰é€æ˜åº¦
â”‚   â”œâ”€â”€ createdAt: Timestamp     # åˆ›å»ºæ—¶é—´
â”‚   â””â”€â”€ updatedAt: Timestamp     # æ›´æ–°æ—¶é—´
```

#### 2. Tag Groups é›†åˆ (`tagGroups`)

```
tagGroups/
â”œâ”€â”€ {groupId}/
â”‚   â”œâ”€â”€ name: string             # åˆ†ç»„åç§°
â”‚   â”œâ”€â”€ color: string            # åˆ†ç»„é¢œè‰²
â”‚   â”œâ”€â”€ description?: string     # åˆ†ç»„æè¿°
â”‚   â”œâ”€â”€ order: number            # æ’åºé¡ºåº
â”‚   â”œâ”€â”€ tagCount: number         # æ ‡ç­¾æ•°é‡
â”‚   â”œâ”€â”€ createdAt: Timestamp     # åˆ›å»ºæ—¶é—´
â”‚   â””â”€â”€ updatedAt: Timestamp     # æ›´æ–°æ—¶é—´
```

#### 3. Prompts é›†åˆ (`prompts`)

```
prompts/
â”œâ”€â”€ {promptId}/
â”‚   â”œâ”€â”€ title: string            # æç¤ºè¯æ ‡é¢˜
â”‚   â”œâ”€â”€ content: string          # æç¤ºè¯å†…å®¹
â”‚   â”œâ”€â”€ color: string            # é¢œè‰²ä¸»é¢˜
â”‚   â”œâ”€â”€ order: number            # æ’åºé¡ºåº
â”‚   â”œâ”€â”€ createdAt: Timestamp     # åˆ›å»ºæ—¶é—´
â”‚   â””â”€â”€ updatedAt: Timestamp     # æ›´æ–°æ—¶é—´
```

### ğŸ”— æ•°æ®å…³ç³»

```mermaid
erDiagram
    IMAGES {
        string id PK
        string url
        string title
        array prompts
        array tags
        timestamp createdAt
        timestamp updatedAt
    }
    
    TAG_GROUPS {
        string id PK
        string name
        string color
        string description
        number order
        number tagCount
        timestamp createdAt
        timestamp updatedAt
    }
    
    PROMPTS {
        string id PK
        string title
        string content
        string color
        number order
        timestamp createdAt
        timestamp updatedAt
    }
    
    TAGS {
        string id
        string name
        string color
        string groupId FK
        number usageCount
    }
    
    IMAGES ||--o{ TAGS : "contains"
    IMAGES ||--o{ PROMPTS : "contains"
    TAG_GROUPS ||--o{ TAGS : "groups"
```

### ğŸ“ æ•°æ®æ“ä½œæ¨¡å¼

#### 1. å®æ—¶ç›‘å¬æ¨¡å¼
- ä½¿ç”¨ Firestore çš„ `onSnapshot` è¿›è¡Œå®æ—¶æ•°æ®åŒæ­¥
- æ”¯æŒç¦»çº¿ç¼“å­˜å’Œè‡ªåŠ¨é‡è¿
- ç›‘å¬å™¨ç®¡ç†å™¨ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ç›‘å¬å™¨

#### 2. æ ‡ç­¾æå–æ¨¡å¼
- æ ‡ç­¾ä¸å•ç‹¬å­˜å‚¨ï¼Œä»å›¾ç‰‡æ•°æ®ä¸­åŠ¨æ€æå–
- è‡ªåŠ¨è®¡ç®—æ ‡ç­¾ä½¿ç”¨æ¬¡æ•°
- æ”¯æŒæ ‡ç­¾åˆ†ç»„ç®¡ç†

#### 3. æ‰¹é‡æ“ä½œæ¨¡å¼
- ä½¿ç”¨ Firestore æ‰¹é‡å†™å…¥ (`writeBatch`)
- æ”¯æŒäº‹åŠ¡æ€§æ“ä½œ
- é”™è¯¯å›æ»šæœºåˆ¶

---

## æ¶æ„/æ¨¡å—è®¾è®¡æ–‡æ¡£

### ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (Next.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UIç»„ä»¶å±‚     â”‚  ä¸šåŠ¡ç»„ä»¶å±‚    â”‚  é¡µé¢å±‚        â”‚  APIè·¯ç”±å±‚   â”‚
â”‚  - Button     â”‚  - ImageCard   â”‚  - HomePage    â”‚  - /api/*   â”‚
â”‚  - Card       â”‚  - SearchBar   â”‚  - Modal       â”‚             â”‚
â”‚  - Input      â”‚  - TagManager  â”‚  - Sidebar     â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      çŠ¶æ€ç®¡ç†å±‚ (Hooks)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å±‚       â”‚  æ“ä½œå±‚        â”‚  å·¥å…·å±‚        â”‚  ç›‘å¬å±‚     â”‚
â”‚  - Database   â”‚  - Operations  â”‚  - Utils       â”‚  - Listenersâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åç«¯æœåŠ¡å±‚ (Firebase)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Firestore    â”‚  Storage       â”‚  Auth          â”‚  Functions  â”‚
â”‚  (æ•°æ®åº“)     â”‚  (æ–‡ä»¶å­˜å‚¨)    â”‚  (è®¤è¯)        â”‚  (äº‘å‡½æ•°)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“¦ æ¨¡å—åˆ’åˆ†

#### 1. UIç»„ä»¶æ¨¡å— (`components/ui/`)
- **èŒè´£**: æä¾›åŸºç¡€UIç»„ä»¶
- **ç‰¹ç‚¹**: æ— çŠ¶æ€ã€å¯å¤ç”¨ã€éµå¾ªè®¾è®¡ç³»ç»Ÿ
- **ä¸»è¦ç»„ä»¶**: Button, Card, Input, Dialog, Badgeç­‰

#### 2. ä¸šåŠ¡ç»„ä»¶æ¨¡å— (`components/`)
- **èŒè´£**: å®ç°å…·ä½“ä¸šåŠ¡é€»è¾‘çš„ç»„ä»¶
- **ç‰¹ç‚¹**: æœ‰çŠ¶æ€ã€ä¸šåŠ¡ç›¸å…³ã€ç»„åˆUIç»„ä»¶
- **ä¸»è¦ç»„ä»¶**: ImageCard, SearchBar, TagManagerç­‰

#### 3. çŠ¶æ€ç®¡ç†æ¨¡å— (`hooks/`)
- **èŒè´£**: ç®¡ç†åº”ç”¨çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘
- **ç‰¹ç‚¹**: è‡ªå®šä¹‰Hooksã€çŠ¶æ€éš”ç¦»ã€é€»è¾‘å¤ç”¨
- **ä¸»è¦Hooks**: useHomePage, useImageState, useDataSyncç­‰

#### 4. æ•°æ®è®¿é—®æ¨¡å— (`lib/`)
- **èŒè´£**: æ•°æ®åº“æ“ä½œå’Œå¤–éƒ¨æœåŠ¡é›†æˆ
- **ç‰¹ç‚¹**: å•ä¾‹æ¨¡å¼ã€é”™è¯¯å¤„ç†ã€ç±»å‹å®‰å…¨
- **ä¸»è¦æ–‡ä»¶**: database.ts, firebase.ts, image-storage.tsç­‰

#### 5. ç±»å‹å®šä¹‰æ¨¡å— (`types/`)
- **èŒè´£**: å®šä¹‰åº”ç”¨ä¸­çš„æ‰€æœ‰ç±»å‹
- **ç‰¹ç‚¹**: ç±»å‹å®‰å…¨ã€æ¥å£ç»Ÿä¸€ã€æ–‡æ¡£åŒ–
- **ä¸»è¦æ–‡ä»¶**: index.ts

### ğŸ”„ æ•°æ®æµæ¶æ„

```mermaid
graph TD
    A[ç”¨æˆ·æ“ä½œ] --> B[ä¸šåŠ¡ç»„ä»¶]
    B --> C[è‡ªå®šä¹‰Hooks]
    C --> D[æ•°æ®è®¿é—®å±‚]
    D --> E[FirebaseæœåŠ¡]
    E --> F[å®æ—¶ç›‘å¬å™¨]
    F --> G[çŠ¶æ€æ›´æ–°]
    G --> H[UIé‡æ–°æ¸²æŸ“]
    
    I[Firebaseå˜æ›´] --> F
    J[ç¦»çº¿ç¼“å­˜] --> C
    K[é”™è¯¯å¤„ç†] --> C
```

### ğŸ¯ è®¾è®¡æ¨¡å¼

#### 1. å•ä¾‹æ¨¡å¼
- **åº”ç”¨**: Databaseç±»ã€ç›‘å¬å™¨ç®¡ç†å™¨
- **ä¼˜åŠ¿**: ç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹ï¼Œç»Ÿä¸€ç®¡ç†èµ„æº

#### 2. è§‚å¯Ÿè€…æ¨¡å¼
- **åº”ç”¨**: Firebaseå®æ—¶ç›‘å¬ã€çŠ¶æ€å˜æ›´é€šçŸ¥
- **ä¼˜åŠ¿**: æ¾è€¦åˆã€å“åº”å¼æ›´æ–°

#### 3. ç»„åˆæ¨¡å¼
- **åº”ç”¨**: UIç»„ä»¶ç»„åˆã€Hookç»„åˆ
- **ä¼˜åŠ¿**: çµæ´»ç»„è£…ã€åŠŸèƒ½å¤ç”¨

#### 4. ç­–ç•¥æ¨¡å¼
- **åº”ç”¨**: ä¸åŒçš„æ’åºç­–ç•¥ã€æœç´¢ç­–ç•¥
- **ä¼˜åŠ¿**: ç®—æ³•å¯æ›¿æ¢ã€æ˜“äºæ‰©å±•

---

## æ•°æ®æµç¨‹å›¾/æ—¶åºå›¾

### ğŸ”„ å›¾ç‰‡ä¸Šä¼ æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant UI as ä¸Šä¼ ç»„ä»¶
    participant H as useImageOperations
    participant S as ImageStorage
    participant DB as Database
    participant FB as Firebase
    
    U->>UI: é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
    UI->>H: handleImageUpload(file)
    H->>S: uploadImage(file)
    S->>FB: ä¸Šä¼ åˆ°Storage
    FB-->>S: è¿”å›ä¸‹è½½URL
    S-->>H: è¿”å›å›¾ç‰‡URL
    H->>DB: addImage(imageData)
    DB->>FB: ä¿å­˜åˆ°Firestore
    FB-->>DB: è¿”å›æ–‡æ¡£ID
    DB-->>H: è¿”å›ç»“æœ
    H->>UI: æ›´æ–°ä¸Šä¼ çŠ¶æ€
    UI->>U: æ˜¾ç¤ºä¸Šä¼ æˆåŠŸ
```

### ğŸ” æœç´¢æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant SB as SearchBar
    participant IS as useImageState
    participant F as è¿‡æ»¤å™¨
    participant IG as ImageGrid
    
    U->>SB: è¾“å…¥æœç´¢å…³é”®è¯
    SB->>IS: handleSearchChange(query)
    IS->>F: åº”ç”¨æœç´¢è¿‡æ»¤å™¨
    F->>F: è¿‡æ»¤å›¾ç‰‡æ•°æ®
    F-->>IS: è¿”å›è¿‡æ»¤ç»“æœ
    IS->>IG: æ›´æ–°filteredImages
    IG->>U: æ˜¾ç¤ºæœç´¢ç»“æœ
```

### ğŸ“Š å®æ—¶æ•°æ®åŒæ­¥æµç¨‹

```mermaid
sequenceDiagram
    participant FB as Firebase
    participant L as ç›‘å¬å™¨
    participant DS as useDataSync
    participant IS as useImageState
    participant UI as UIç»„ä»¶
    
    FB->>L: æ•°æ®å˜æ›´äº‹ä»¶
    L->>DS: onSnapshotå›è°ƒ
    DS->>DS: å¤„ç†æ•°æ®è½¬æ¢
    DS->>IS: setImages(newImages)
    IS->>IS: æ›´æ–°çŠ¶æ€
    IS->>UI: è§¦å‘é‡æ–°æ¸²æŸ“
    UI->>UI: æ˜¾ç¤ºæœ€æ–°æ•°æ®
```

### ğŸ·ï¸ æ ‡ç­¾ç®¡ç†æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant TM as TagManager
    participant TO as useTagOperations
    participant DB as Database
    participant IS as useImageState
    
    U->>TM: åˆ›å»ºæ–°æ ‡ç­¾
    TM->>TO: createTag(tagData)
    TO->>DB: createTag(tagData)
    DB->>DB: ä¿å­˜åˆ°Firestore
    DB-->>TO: è¿”å›ç»“æœ
    TO->>IS: è§¦å‘æ•°æ®åˆ·æ–°
    IS->>TM: æ›´æ–°æ ‡ç­¾åˆ—è¡¨
    TM->>U: æ˜¾ç¤ºæ–°æ ‡ç­¾
```

### ğŸ“¤ æ•°æ®å¯¼å‡ºæµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant UI as å¯¼å‡ºç»„ä»¶
    participant API as /api/export
    participant DA as DatabaseAdmin
    participant FB as Firebase
    
    U->>UI: ç‚¹å‡»å¯¼å‡ºæŒ‰é’®
    UI->>API: GET /api/export
    API->>DA: exportAllData()
    DA->>FB: è·å–æ‰€æœ‰æ•°æ®
    FB-->>DA: è¿”å›æ•°æ®é›†åˆ
    DA->>DA: æ ¼å¼åŒ–å¯¼å‡ºæ•°æ®
    DA-->>API: è¿”å›JSONæ•°æ®
    API-->>UI: ä¸‹è½½æ–‡ä»¶å“åº”
    UI->>U: è§¦å‘æ–‡ä»¶ä¸‹è½½
```

---

## APIæ¥å£è®¾è®¡

### ğŸŒ æ¥å£æ¦‚è§ˆ

**åŸºç¡€URL**: `http://localhost:3001/api`  
**æ•°æ®æ ¼å¼**: JSON  
**è®¤è¯æ–¹å¼**: æ— éœ€è®¤è¯ï¼ˆæœ¬åœ°å¼€å‘ç¯å¢ƒï¼‰

### ğŸ“‹ æ¥å£åˆ†ç±»

#### 1. å›¾ç‰‡ç®¡ç†æ¥å£
- `GET /api/images` - è·å–å›¾ç‰‡åˆ—è¡¨
- `POST /api/images` - ä¸Šä¼ æ–°å›¾ç‰‡
- `GET /api/images/{id}` - è·å–å•ä¸ªå›¾ç‰‡
- `PUT /api/images/{id}` - æ›´æ–°å›¾ç‰‡ä¿¡æ¯
- `DELETE /api/images/{id}` - åˆ é™¤å›¾ç‰‡

#### 2. æ ‡ç­¾ç®¡ç†æ¥å£
- `GET /api/tags` - è·å–æ‰€æœ‰æ ‡ç­¾
- `POST /api/tags` - åˆ›å»ºæ–°æ ‡ç­¾
- `PUT /api/tags/{id}` - æ›´æ–°æ ‡ç­¾
- `DELETE /api/tags/{id}` - åˆ é™¤æ ‡ç­¾

#### 3. æ ‡ç­¾åˆ†ç»„æ¥å£
- `GET /api/tag-groups` - è·å–æ ‡ç­¾åˆ†ç»„
- `POST /api/tag-groups` - åˆ›å»ºæ ‡ç­¾åˆ†ç»„
- `PUT /api/tag-groups/{id}` - æ›´æ–°æ ‡ç­¾åˆ†ç»„
- `DELETE /api/tag-groups/{id}` - åˆ é™¤æ ‡ç­¾åˆ†ç»„

#### 4. æ•°æ®å¯¼å…¥å¯¼å‡ºæ¥å£
- `GET /api/export` - å¯¼å‡ºæ•°æ®
- `POST /api/import` - å¯¼å…¥æ•°æ®
- `GET /api/export-package` - å¯¼å‡ºå®Œæ•´æ•°æ®åŒ…

#### 5. å¥åº·æ£€æŸ¥æ¥å£
- `GET /api/health/firebase` - Firebaseè¿æ¥æ£€æŸ¥

### ğŸ“ é€šç”¨å“åº”æ ¼å¼

```json
{
  "success": boolean,
  "data": any,
  "error": string,
  "timestamp": string
}
```

### ğŸš¨ é”™è¯¯å¤„ç†

| é”™è¯¯ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå¿…å¡«å­—æ®µ |
| 404 | èµ„æºä¸å­˜åœ¨ | ç¡®è®¤èµ„æºIDæ˜¯å¦æ­£ç¡® |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—ï¼Œè”ç³»å¼€å‘äººå‘˜ |

---

## æ ·å¼è®¾è®¡è§„èŒƒ

### ğŸ¨ è®¾è®¡ç³»ç»Ÿ

#### 1. é¢œè‰²ç³»ç»Ÿ
- **ä¸»è‰²è°ƒ**: `hsl(222.2 47.4% 11.2%)`
- **æ¬¡è¦è‰²**: `hsl(210 40% 96%)`
- **å¼ºè°ƒè‰²**: `hsl(210 40% 96%)`
- **å±é™©è‰²**: `hsl(0 84.2% 60.2%)`

#### 2. å­—ä½“ç³»ç»Ÿ
- **ä¸»å­—ä½“**: ç³»ç»Ÿé»˜è®¤å­—ä½“æ ˆ
- **ä»£ç å­—ä½“**: `ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace`

#### 3. é—´è·ç³»ç»Ÿ
- **åŸºç¡€å•ä½**: 4px
- **å¸¸ç”¨é—´è·**: 8px, 12px, 16px, 24px, 32px, 48px

#### 4. åœ†è§’ç³»ç»Ÿ
- **å°åœ†è§’**: 4px
- **ä¸­åœ†è§’**: 8px
- **å¤§åœ†è§’**: 12px
- **è¶…å¤§åœ†è§’**: 24px

### ğŸ§© ç»„ä»¶è§„èŒƒ

#### 1. æŒ‰é’®ç»„ä»¶
- **é«˜åº¦**: 40px (é»˜è®¤), 36px (å°), 44px (å¤§)
- **å†…è¾¹è·**: 16px (æ°´å¹³), 8px (å‚ç›´)
- **åœ†è§’**: 6px

#### 2. å¡ç‰‡ç»„ä»¶
- **åœ†è§’**: 24px
- **é˜´å½±**: `0 1px 3px 0 rgb(0 0 0 / 0.1)`
- **å†…è¾¹è·**: 24px

#### 3. è¾“å…¥æ¡†ç»„ä»¶
- **é«˜åº¦**: 40px
- **è¾¹æ¡†**: 1px solid
- **åœ†è§’**: 6px
- **å†…è¾¹è·**: 12px

### ğŸ­ åŠ¨ç”»è§„èŒƒ

#### 1. è¿‡æ¸¡æ—¶é—´
- **å¿«é€Ÿ**: 150ms
- **æ ‡å‡†**: 300ms
- **æ…¢é€Ÿ**: 500ms

#### 2. ç¼“åŠ¨å‡½æ•°
- **æ ‡å‡†**: `cubic-bezier(0.25, 0.46, 0.45, 0.94)`
- **å¼¹æ€§**: `cubic-bezier(0.68, -0.55, 0.265, 1.55)`

#### 3. å¸¸ç”¨åŠ¨ç”»
- **æ‚¬åœ**: `scale(1.05)`, `translateY(-2px)`
- **ç‚¹å‡»**: `scale(0.95)`
- **æ·¡å…¥**: `opacity: 0 â†’ 1`

---

## ğŸ“š å¼€å‘æŒ‡å—

### ğŸš€ å¿«é€Ÿå¼€å§‹

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone [repository-url]
   cd good3
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env.local
   # ç¼–è¾‘ .env.local é…ç½® Firebase
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

### ğŸ“ é¡¹ç›®ç»“æ„

```
good3/
â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”œâ”€â”€ globals.css     # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ page.tsx        # ä¸»é¡µé¢
â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”œâ”€â”€ ui/            # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ tags/          # æ ‡ç­¾ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ ...            # å…¶ä»–ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ lib/               # å·¥å…·åº“å’ŒæœåŠ¡
â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ public/            # é™æ€èµ„æº
â””â”€â”€ scripts/           # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
```

### ğŸ”§ å¼€å‘è§„èŒƒ

#### 1. ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- æ–‡ä»¶ä½¿ç”¨ kebab-case å‘½å

#### 2. ç»„ä»¶è§„èŒƒ
- ä¼˜å…ˆä½¿ç”¨å‡½æ•°ç»„ä»¶å’Œ Hooks
- ä¿æŒç»„ä»¶å•ä¸€èŒè´£
- ä½¿ç”¨ TypeScript æ¥å£å®šä¹‰ Props
- æ·»åŠ é€‚å½“çš„é”™è¯¯è¾¹ç•Œ

#### 3. çŠ¶æ€ç®¡ç†è§„èŒƒ
- ä½¿ç”¨è‡ªå®šä¹‰ Hooks å°è£…ä¸šåŠ¡é€»è¾‘
- é¿å… prop drillingï¼Œä½¿ç”¨ Context ä¼ é€’æ·±å±‚çŠ¶æ€
- ä¿æŒçŠ¶æ€çš„ä¸å¯å˜æ€§
- åˆç†ä½¿ç”¨ useMemo å’Œ useCallback ä¼˜åŒ–æ€§èƒ½

### ğŸ§ª æµ‹è¯•ç­–ç•¥

#### 1. å•å…ƒæµ‹è¯•
- æµ‹è¯•å·¥å…·å‡½æ•°å’Œ Hooks
- æµ‹è¯•ç»„ä»¶çš„åŸºæœ¬æ¸²æŸ“å’Œäº¤äº’
- ä½¿ç”¨ Jest å’Œ React Testing Library

#### 2. é›†æˆæµ‹è¯•
- æµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’
- æµ‹è¯•æ•°æ®æµå’ŒçŠ¶æ€ç®¡ç†
- æ¨¡æ‹Ÿ Firebase æœåŠ¡

#### 3. ç«¯åˆ°ç«¯æµ‹è¯•
- æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
- ä½¿ç”¨ Playwright æˆ– Cypress
- è¦†ç›–å…³é”®ä¸šåŠ¡åœºæ™¯

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ğŸš€ å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
   - ä½¿ç”¨ Next.js åŠ¨æ€å¯¼å…¥
   - æŒ‰è·¯ç”±åˆ†å‰²ä»£ç 
   - æ‡’åŠ è½½éå…³é”®ç»„ä»¶

2. **å›¾ç‰‡ä¼˜åŒ–**
   - ä½¿ç”¨ Next.js Image ç»„ä»¶
   - å®ç°å›¾ç‰‡æ‡’åŠ è½½
   - æ”¯æŒ WebP æ ¼å¼

3. **çŠ¶æ€ä¼˜åŒ–**
   - ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
   - ä½¿ç”¨ useCallback é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
   - å®ç°è™šæ‹Ÿæ»šåŠ¨

### ğŸ”¥ åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
   - åˆç†è®¾è®¡ Firestore ç´¢å¼•
   - ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢
   - å®ç°æ•°æ®ç¼“å­˜

2. **ç½‘ç»œä¼˜åŒ–**
   - å¯ç”¨ Firebase ç¦»çº¿æŒä¹…åŒ–
   - å®ç°è¯·æ±‚å»é‡
   - ä½¿ç”¨ CDN åŠ é€Ÿ

---

## ğŸ”’ å®‰å…¨è€ƒè™‘

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨

1. **Firebase å®‰å…¨è§„åˆ™**
   ```javascript
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /{document=**} {
         allow read, write: if true; // å¼€å‘ç¯å¢ƒ
       }
     }
   }
   ```

2. **è¾“å…¥éªŒè¯**
   - å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒé‡éªŒè¯
   - é˜²æ­¢ XSS æ”»å‡»
   - æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶

3. **ç¯å¢ƒå˜é‡ä¿æŠ¤**
   - æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
   - ä¸åœ¨å®¢æˆ·ç«¯æš´éœ²ç§é’¥
   - ä½¿ç”¨ Firebase å®‰å…¨è§„åˆ™æ§åˆ¶è®¿é—®

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### ğŸ“ˆ æ€§èƒ½ç›‘æ§

1. **å‰ç«¯ç›‘æ§**
   - ä½¿ç”¨ Web Vitals ç›‘æ§æ€§èƒ½æŒ‡æ ‡
   - å®ç°é”™è¯¯è¾¹ç•Œæ•è·å¼‚å¸¸
   - ç›‘æ§ç”¨æˆ·è¡Œä¸ºå’Œäº¤äº’

2. **åç«¯ç›‘æ§**
   - Firebase æ€§èƒ½ç›‘æ§
   - æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½åˆ†æ
   - API å“åº”æ—¶é—´ç›‘æ§

### ğŸ“ æ—¥å¿—ç³»ç»Ÿ

1. **å®¢æˆ·ç«¯æ—¥å¿—**
   ```typescript
   console.log('ğŸ“Š ç›‘å¬å™¨çŠ¶æ€:', status);
   console.error('å›¾ç‰‡ç›‘å¬é”™è¯¯:', error);
   ```

2. **æœåŠ¡ç«¯æ—¥å¿—**
   - Firebase Functions æ—¥å¿—
   - é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Š
   - ç”¨æˆ·æ“ä½œå®¡è®¡

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ğŸŒ ç”Ÿäº§éƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

2. **ç¯å¢ƒé…ç½®**
   - é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
   - è®¾ç½® Firebase å®‰å…¨è§„åˆ™
   - é…ç½®åŸŸåå’Œ SSL

3. **éƒ¨ç½²å¹³å°**
   - Vercel (æ¨è)
   - Netlify
   - Firebase Hosting

### ğŸ”„ CI/CD æµç¨‹

1. **è‡ªåŠ¨åŒ–æµ‹è¯•**
   - ä»£ç æäº¤è§¦å‘æµ‹è¯•
   - é€šè¿‡æµ‹è¯•åè‡ªåŠ¨éƒ¨ç½²
   - å¤±è´¥æ—¶å›æ»šæœºåˆ¶

2. **éƒ¨ç½²ç­–ç•¥**
   - è“ç»¿éƒ¨ç½²
   - é‡‘ä¸é›€å‘å¸ƒ
   - çƒ­æ›´æ–°æ”¯æŒ

---

## ğŸ“ è”ç³»ä¿¡æ¯

**é¡¹ç›®ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024-01-01  
**æŠ€æœ¯æ”¯æŒ**: [æŠ€æœ¯æ”¯æŒé‚®ç®±]

---

*æœ¬æ–‡æ¡£å°†éšç€é¡¹ç›®çš„å‘å±•æŒç»­æ›´æ–°ï¼Œè¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚*